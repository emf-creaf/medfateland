<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add forests — add_forests • medfateland</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add forests — add_forests"><meta name="description" content="Creates and adds forest data to an sf object by reading from tree and shrub data tables"><meta property="og:description" content="Creates and adds forest data to an sf object by reading from tree and shrub data tables"><meta property="og:image" content="https://emf-creaf.github.io/medfateland/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">medfateland</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/intro/PackageOverview.html">Package overview</a></li>
    <li><a class="dropdown-item" href="../articles/intro/PreparingInputs_I.html">Preparing inputs I: forest inventory plots</a></li>
    <li><a class="dropdown-item" href="../articles/intro/PreparingInputs_II.html">Preparing inputs II: arbitrary locations</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Running simulations</h6></li>
    <li><a class="dropdown-item" href="../articles/runmodels/SpatiallyUncoupledSimulations.html">Spatially-uncoupled simulations</a></li>
    <li><a class="dropdown-item" href="../articles/runmodels/WatershedSimulations.html">Watershed simulations</a></li>
    <li><a class="dropdown-item" href="../articles/runmodels/ManagementScenarios.html">Management scenarios</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/emf-creaf/medfateland/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add forests</h1>
      <small class="dont-index">Source: <a href="https://github.com/emf-creaf/medfateland/blob/HEAD/R/add_forests.R" class="external-link"><code>R/add_forests.R</code></a></small>
      <div class="d-none name"><code>add_forests.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates and adds forest data to an <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> object by reading from tree and shrub data tables</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_forests</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  tree_table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tree_mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  shrub_table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  shrub_mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  merge_trees <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  merge_shrubs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  SpParams <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of class <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> with a valid CRS definition, and a column called 'id'.</p></dd>


<dt id="arg-tree-table">tree_table<a class="anchor" aria-label="anchor" href="#arg-tree-table"></a></dt>
<dd><p>A data frame with tree records in rows and attributes in columns. Tree records can correspond to individual trees or groups of trees with an associated density.</p></dd>


<dt id="arg-tree-mapping">tree_mapping<a class="anchor" aria-label="anchor" href="#arg-tree-mapping"></a></dt>
<dd><p>A named character vector to specify mappings of columns in <code>tree_table</code> into attributes of <code>treeData</code>. Accepted names (and the corresponding specifications for the columns in <code>tree_table</code>) are:</p><ul><li><p>"id": Forest stand id.</p></li>
<li><p>"Species": Species code (should follow codes in <code>SpParams</code>).</p></li>
<li><p>"Species.name": Species name. In this case, the species code will be drawn by matching names with species names in <code>SpParams</code>.</p></li>
<li><p>"N": Tree density (in ind./ha).</p></li>
<li><p>"DBH": Diameter at breast height (in cm).</p></li>
<li><p>"Height": Tree height (in cm).</p></li>
<li><p>"plot.size": Plot size (in m2) to which each record refers to. This is used to calculate tree density (stems per hectare) when not supplied.</p></li>
<li><p>"Z50": Depth (in mm) corresponding to 50 percent of fine roots.</p></li>
<li><p>"Z95": Depth (in mm) corresponding to 95 percent of fine roots.</p></li>
</ul></dd>


<dt id="arg-shrub-table">shrub_table<a class="anchor" aria-label="anchor" href="#arg-shrub-table"></a></dt>
<dd><p>A data frame with shrub records in rows and attributes in columns. Records can correspond to individual shrubs (with crown dimensions and height) or groups of shrubs with an associated cover estimate.</p></dd>


<dt id="arg-shrub-mapping">shrub_mapping<a class="anchor" aria-label="anchor" href="#arg-shrub-mapping"></a></dt>
<dd><p>A named character vector to specify mappings of columns in <code>shrub_table</code> into attributes of <code>shrubData</code>. Accepted names (and the corresponding specifications for the columns in <code>shrub_table</code>) are:</p><ul><li><p>"id": Forest stand id.</p></li>
<li><p>"Species": Species code (should follow codes in <code>SpParams</code>).</p></li>
<li><p>"Species.name": Species name. In this case, the species code will be drawn by matching names with species names in <code>SpParams</code>.</p></li>
<li><p>"Cover": Shrub cover (in percent).</p></li>
<li><p>"D1": Shrub largest crown diameter (in cm).</p></li>
<li><p>"D2": Shrub crown diameter orthogonal to the largest one (in cm).</p></li>
<li><p>"Height": Shrub height (in cm).</p></li>
<li><p>"plot.size": Plot size (in m2) to which each record refers to. This is used to calculate shrub cover when shrub data is given at the individual level.</p></li>
<li><p>"Z50": Depth (in mm) corresponding to 50 percent of fine roots.</p></li>
<li><p>"Z95": Depth (in mm) corresponding to 95 percent of fine roots.</p></li>
</ul></dd>


<dt id="arg-merge-trees">merge_trees<a class="anchor" aria-label="anchor" href="#arg-merge-trees"></a></dt>
<dd><p>A logical flag to simplify tree cohorts by merging tree records in DBH classes (see <code><a href="https://emf-creaf.github.io/medfate/reference/forest_simplification.html" class="external-link">forest_mergeTrees</a></code>).</p></dd>


<dt id="arg-merge-shrubs">merge_shrubs<a class="anchor" aria-label="anchor" href="#arg-merge-shrubs"></a></dt>
<dd><p>A logical flag to simplify shrub cohorts by merging shrub records in height classes (see <code><a href="https://emf-creaf.github.io/medfate/reference/forest_simplification.html" class="external-link">forest_mergeShrubs</a></code>).</p></dd>


<dt id="arg-spparams">SpParams<a class="anchor" aria-label="anchor" href="#arg-spparams"></a></dt>
<dd><p>A data frame with species parameters (see <code><a href="https://emf-creaf.github.io/medfate/reference/SpParams.html" class="external-link">SpParamsMED</a></code>) from which valid species names are drawn.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>A logical flag to include a progress bar while processing the data.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A modified object of class <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> with column 'forest'.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The current implementation will replace existing forests of the indicated 'id' values.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="forest_parametrization.html">impute_forests()</a></code>, <code><a href="https://emf-creaf.github.io/medfate/reference/forest_mapWoodyTables.html" class="external-link">forest_mapWoodyTables</a></code>, <code><a href="https://emf-creaf.github.io/medfate/reference/forest_simplification.html" class="external-link">forest_mergeTrees</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Miquel De Cáceres Ainsa, CREAF</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load tree data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">poblet_trees</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load species parameters</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define sf with three stands</span></span></span>
<span class="r-in"><span><span class="va">cc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0215</span>, <span class="fl">41.3432</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0219</span>, <span class="fl">41.3443</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0219</span>, <span class="fl">41.3443</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lon <span class="op">=</span> <span class="va">cc</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, lat <span class="op">=</span> <span class="va">cc</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, </span></span>
<span class="r-in"><span>                id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POBL_CTL"</span>, <span class="st">"POBL_THI_BEF"</span>, <span class="st">"POBL_THI_AFT"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">d</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lon"</span>, <span class="st">"lat"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 3 features and 1 field</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POINT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 1.0215 ymin: 41.3432 xmax: 1.0219 ymax: 41.3443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             id               geometry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     POBL_CTL POINT (1.0215 41.3432)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 POBL_THI_BEF POINT (1.0219 41.3443)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 POBL_THI_AFT POINT (1.0219 41.3443)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define tree mapping </span></span></span>
<span class="r-in"><span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span> <span class="op">=</span> <span class="st">"Plot.Code"</span>, <span class="st">"Species.name"</span> <span class="op">=</span> <span class="st">"Species"</span>, <span class="st">"DBH"</span> <span class="op">=</span> <span class="st">"Diameter.cm"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read tree data (warnings are raised)</span></span></span>
<span class="r-in"><span><span class="va">y_1</span> <span class="op">&lt;-</span> <span class="fu">add_forests</span><span class="op">(</span><span class="va">x</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Taxon names that were not matched: Quercus humilis.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Taxon names that were not matched: Quercus humilis.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Correct scientific name for downy oak and repeat to avoid losing tree records</span></span></span>
<span class="r-in"><span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Species</span><span class="op">[</span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Species</span><span class="op">==</span><span class="st">"Quercus humilis"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Quercus pubescens"</span></span></span>
<span class="r-in"><span><span class="va">y_1</span> <span class="op">&lt;-</span> <span class="fu">add_forests</span><span class="op">(</span><span class="va">x</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Display summary of first forest</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">y_1</span><span class="op">$</span><span class="va">forest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Tree BA (m2/ha): 3.0179815  adult trees: 3.0179815  saplings: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Density (ind/ha) adult trees: 267  saplings: 0  shrubs (estimated): 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cover (%) adult trees: 42.3272186  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LAI (m2/m2) total: 0.5419688  adult trees: 0.5419688  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fuel loading (kg/m2) total: 0.1414227  adult trees: 0.1414227  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PAR ground (%): NA  SWR ground (%): NA </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add sampled plot surface and repeat reading to correct tree density</span></span></span>
<span class="r-in"><span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">PlotSurface</span> <span class="op">&lt;-</span> <span class="fl">706.86</span></span></span>
<span class="r-in"><span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mapping</span>, <span class="st">"plot.size"</span> <span class="op">=</span> <span class="st">"PlotSurface"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y_2</span> <span class="op">&lt;-</span> <span class="fu">add_forests</span><span class="op">(</span><span class="va">x</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">y_2</span><span class="op">$</span><span class="va">forest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Tree BA (m2/ha): 42.6956049  adult trees: 42.6956049  saplings: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Density (ind/ha) adult trees: 3777.2684832  saplings: 0  shrubs (estimated): 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cover (%) adult trees: 100  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LAI (m2/m2) total: 4.9189289  adult trees: 4.9189289  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fuel loading (kg/m2) total: 1.2992685  adult trees: 1.2992685  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PAR ground (%): NA  SWR ground (%): NA </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check forests (height is missing!)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="check_inputs.html">check_forests</a></span><span class="op">(</span><span class="va">y_2</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> No wildland locations with NULL values in column 'forest'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> All objects in column 'forest' have the right class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Missing tree height values detected for 28 (100%) in 3 wildland locations (100%).</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Estimate tree height using general allometric</span></span></span>
<span class="r-in"><span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Height.cm</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="fl">1.806</span><span class="op">*</span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Diameter.cm</span><span class="op">^</span><span class="fl">0.518</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Modify mapping to include height and repeat</span></span></span>
<span class="r-in"><span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mapping</span>, <span class="st">"Height"</span> <span class="op">=</span> <span class="st">"Height.cm"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y_3</span> <span class="op">&lt;-</span> <span class="fu">add_forests</span><span class="op">(</span><span class="va">x</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">y_3</span><span class="op">$</span><span class="va">forest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Tree BA (m2/ha): 42.6956049  adult trees: 42.6956049  saplings: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Density (ind/ha) adult trees: 3777.2684832  saplings: 0  shrubs (estimated): 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cover (%) adult trees: 100  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LAI (m2/m2) total: 4.9189289  adult trees: 4.9189289  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fuel loading (kg/m2) total: 1.2992685  adult trees: 1.2992685  saplings: 0  shrubs: 0  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PAR ground (%): 6.6842854  SWR ground (%): 13.4793937 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Final check</span></span></span>
<span class="r-in"><span><span class="fu"><a href="check_inputs.html">check_forests</a></span><span class="op">(</span><span class="va">y_3</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> No wildland locations with NULL values in column 'forest'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> All objects in column 'forest' have the right class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> No missing/wrong values detected in key tree/shrub attributes of 'forest' objects.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miquel De Cáceres, Aitor Améztegui, María González, Núria Aquilué, Daniel Caviedes-Voullième, Mario Morales-Hernández.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

