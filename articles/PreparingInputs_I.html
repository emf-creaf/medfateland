<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preparing inputs I: forest inventory plots • medfateland</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Preparing inputs I: forest inventory plots">
<meta property="og:description" content="medfateland">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">medfateland</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Preparing inputs I: forest inventory plots</h1>
                        <h4 data-toc-skip class="author">Miquel De
Cáceres / Adriana Tovar / Víctor Granda</h4>
            
            <h4 data-toc-skip class="date">2024-05-25</h4>
      
      
      <div class="hidden name"><code>PreparingInputs_I.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="aim">Aim<a class="anchor" aria-label="anchor" href="#aim"></a>
</h2>
<p>This vignette has been created to illustrate the creation of spatial
inputs to be used in model simulations with the package, starting
<strong>from forest inventory plot data</strong>. The functions
introduced in this document are meant to be executed sequentially to
progressively add spatial information, as illustrated in the workflow
below, but users are free to use them in the most convenient way.</p>
<p><img src="forest_inventory_init_workflow.png" width="80%" style="display: block; margin: auto;"></p>
<p>Before reading this vignette, users should be familiar with
<em>forest</em> and <em>soil</em> structures in package
<strong>medfate</strong>. Moreover, a brief introduction to spatial
structures used in <strong>medfateland</strong> package is given in
vignette <a href="https://emf-creaf.github.io/medfateland/articles/PackageOverview.html" class="external-link">Package
overview</a> and examples are given in vignettes <a href="https://emf-creaf.github.io/medfateland/articles/SpatiallyUncoupledSimulations.html" class="external-link">Spatially-uncoupled
simulations</a>.</p>
<p>Let’s first load necessary libraries:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emf-creaf.github.io/medfate/" class="external-link">medfate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emf-creaf.github.io/medfateland/index.html" class="external-link">medfateland</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dieghernan.github.io/tidyterra/" class="external-link">tidyterra</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="target-locations">Target locations<a class="anchor" aria-label="anchor" href="#target-locations"></a>
</h2>
<p>Package <strong>medfate</strong> includes a small dataset of tree
data, corresponding to a dense holm oak forest in Poblet (Catalonia,
Spain). As a result of the abandonment of previous coppicing
exploitation, there is a high density of stems per individual. The data
set includes data from a control plot and managed plot, where for the
second two inventories have been carried out, one before management
(thinning operation) and another afterwards. Hence, there are three
stand structures.</p>
<p>We begin by defining an <code>sf</code> object with the target
locations and forest stand identifiers (column <code>id</code>):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define sf with three stands</span></span>
<span><span class="va">cc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0215</span>, <span class="fl">41.3432</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0219</span>, <span class="fl">41.3443</span><span class="op">)</span>, </span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0219</span>, <span class="fl">41.3443</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lon <span class="op">=</span> <span class="va">cc</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, lat <span class="op">=</span> <span class="va">cc</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, </span>
<span>                id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POBL_CTL"</span>, <span class="st">"POBL_THI_BEF"</span>, <span class="st">"POBL_THI_AFT"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">d</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lon"</span>, <span class="st">"lat"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 3 features and 1 field</span></span>
<span><span class="co">## Geometry type: POINT</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 1.0215 ymin: 41.3432 xmax: 1.0219 ymax: 41.3443</span></span>
<span><span class="co">## Geodetic CRS:  WGS 84</span></span>
<span><span class="co">##             id               geometry</span></span>
<span><span class="co">## 1     POBL_CTL POINT (1.0215 41.3432)</span></span>
<span><span class="co">## 2 POBL_THI_BEF POINT (1.0219 41.3443)</span></span>
<span><span class="co">## 3 POBL_THI_AFT POINT (1.0219 41.3443)</span></span></code></pre>
<p>where <code>POBL_CTL</code> is the control forest plot,
<code>POBL_THI_BEF</code> is the managed plot before thinning and
<code>POBL_THI_AFT</code> is the managed plot after thinning.</p>
</div>
<div class="section level2">
<h2 id="topography">Topography<a class="anchor" aria-label="anchor" href="#topography"></a>
</h2>
<p>Once an object <code>sf</code> has been defined with target
locations, we need to determine topographic features (elevation, slope,
aspect) and land cover corresponding to those locations. You should have
access to a Digital Elevation Model (DEM) at a desired resolution. Here
we will use a DEM raster for Catalonia at 30 m resolution, which we load
using package <code>terra</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset_path</span> <span class="op">&lt;-</span> <span class="st">"~/OneDrive/EMF_datasets/"</span></span>
<span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataset_path</span>,<span class="st">"Topography/Products/Catalunya/MET30m_ETRS89_UTM31_ICGC.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dem</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 9282, 9391, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 30, 30  (x, y)</span></span>
<span><span class="co">## extent      : 258097.5, 539827.5, 4485488, 4763948  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : ETRS89 / UTM zone 31N (EPSG:25831) </span></span>
<span><span class="co">## source      : MET30m_ETRS89_UTM31_ICGC.tif </span></span>
<span><span class="co">## name        : met15v20as0f0118Bmr1r050 </span></span>
<span><span class="co">## min value   :                   -7.120 </span></span>
<span><span class="co">## max value   :                 3133.625</span></span></code></pre>
<p>Having these inputs, we can use function
<code><a href="../reference/add_topography.html">add_topography()</a></code> to add topographic features to our
starting <code>sf</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_topography.html">add_topography</a></span><span class="op">(</span><span class="va">x</span>, dem <span class="op">=</span> <span class="va">dem</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## |---------|---------|---------|---------|=========================================                                          |---------|---------|---------|---------|=========================================                                          </span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_1</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 3 features and 4 fields</span></span>
<span><span class="co">## Geometry type: POINT</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 1.0215 ymin: 41.3432 xmax: 1.0219 ymax: 41.3443</span></span>
<span><span class="co">## Geodetic CRS:  WGS 84</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">##   id                   geometry elevation slope aspect</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;POINT [°]&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> POBL_CTL     (1.0215 41.3432)      853.  30.1   76.0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> POBL_THI_BEF (1.0219 41.3443)      814.  29.3   40.3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> POBL_THI_AFT (1.0219 41.3443)      814.  29.3   40.3</span></span></code></pre>
<p>We can check that there are no missing values in topographic
features:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/add_topography.html">check_topography</a></span><span class="op">(</span><span class="va">y_1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BB00;">✔</span> No missing values in topography.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="forest-inventory-parsing">Forest inventory parsing<a class="anchor" aria-label="anchor" href="#forest-inventory-parsing"></a>
</h2>
<p>The next step is to define <code>forest</code> objects for our
simulations. Forests should be defined for all target locations whose
land cover is defined as <code>wildland</code> (here, all three stands).
In our case, we will define <code>forest</code> objects from tree
records in Poblet. While at this point you would read your own data from
a file or data base, here we simply load the data from
<strong>medfate</strong>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">poblet_trees</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">poblet_trees</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Plot.Code Indv.Ref             Species Diameter.cm</span></span>
<span><span class="co">## 1  POBL_CTL        1 Acer monspessulanum         7.6</span></span>
<span><span class="co">## 2  POBL_CTL        2       Arbutus unedo         7.5</span></span>
<span><span class="co">## 3  POBL_CTL        3       Arbutus unedo         7.5</span></span>
<span><span class="co">## 4  POBL_CTL        4       Arbutus unedo         7.5</span></span>
<span><span class="co">## 5  POBL_CTL        5       Arbutus unedo         7.5</span></span>
<span><span class="co">## 6  POBL_CTL        6       Arbutus unedo         7.5</span></span></code></pre>
<p>There are only four columns in the data set. <code>Plot.Code</code>
identifies the forest stand, <code>Indv.Ref</code> is the tree number,
<code>Species</code> is the scientific name of the tree species and
<code>Diameter.cm</code> is the tree diameter in cm. To properly parse
forest inventory data, we need to define a mapping from these variables
into names meaningful for <strong>medfate</strong>. For this, we can
check function <code><a href="https://emf-creaf.github.io/medfate/reference/forest_mapWoodyTables.html" class="external-link">forest_mapTreeTable()</a></code> in the package.
Furthermore, we need to map the forest stand identifier. If we exclude
<code>Indv.Ref</code>, the other variables would be mapped using:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span> <span class="op">=</span> <span class="st">"Plot.Code"</span>, <span class="st">"Species.name"</span> <span class="op">=</span> <span class="st">"Species"</span>, <span class="st">"DBH"</span> <span class="op">=</span> <span class="st">"Diameter.cm"</span><span class="op">)</span></span></code></pre></div>
<p>Now we are ready to call function <code><a href="../reference/add_forests.html">add_forests()</a></code>, which
should facilitate the creation of forest objects:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_forests.html">add_forests</a></span><span class="op">(</span><span class="va">y_1</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, </span>
<span>                   SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in forest_mapTreeTable(x = tree_id, mapping_x = tree_mapping, SpParams</span></span>
<span><span class="co">## = SpParams): Taxon names that were not matched: Quercus humilis.</span></span>
<span><span class="co">## Warning in forest_mapTreeTable(x = tree_id, mapping_x = tree_mapping, SpParams</span></span>
<span><span class="co">## = SpParams): Taxon names that were not matched: Quercus humilis.</span></span></code></pre>
<p>Note that two warnings were raised, informing us that <em>Quercus
humilis</em> (downy oak) was not matched to any species name in
<code>SpParamsMED</code> (that is the reason why we provided it as an
input). We correct the scientific name for downy oak and repeat to avoid
losing tree records:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Species</span><span class="op">[</span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Species</span><span class="op">==</span><span class="st">"Quercus humilis"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Quercus pubescens"</span></span>
<span><span class="va">y_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_forests.html">add_forests</a></span><span class="op">(</span><span class="va">y_1</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, </span>
<span>                   SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span>
<span><span class="va">y_2</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 3 features and 5 fields</span></span>
<span><span class="co">## Geometry type: POINT</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 1.0215 ymin: 41.3432 xmax: 1.0219 ymax: 41.3443</span></span>
<span><span class="co">## Geodetic CRS:  WGS 84</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 6</span></span></span>
<span><span class="co">##   id                   geometry elevation slope aspect forest      </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;POINT [°]&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> POBL_CTL     (1.0215 41.3432)      853.  30.1   76.0 <span style="color: #949494;">&lt;forest [5]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> POBL_THI_BEF (1.0219 41.3443)      814.  29.3   40.3 <span style="color: #949494;">&lt;forest [5]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> POBL_THI_AFT (1.0219 41.3443)      814.  29.3   40.3 <span style="color: #949494;">&lt;forest [5]&gt;</span></span></span></code></pre>
<p>The function has added a column <code>forest</code> with the tree
data. We can check the metrics of the first forest stand using:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">y_2</span><span class="op">$</span><span class="va">forest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">SpParamsMED</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tree BA (m2/ha): 3.0179815  adult trees: 3.0179815  saplings: 0 </span></span>
<span><span class="co">## Density (ind/ha) adult trees: 267  saplings: 0  shrubs (estimated): 0 </span></span>
<span><span class="co">## Cover (%) adult trees: 42.3272186  saplings: 0  shrubs: 0  herbs: 0 </span></span>
<span><span class="co">## LAI (m2/m2) total: 0.5419688  adult trees: 0.5419688  saplings: 0  shrubs: 0  herbs: 0 </span></span>
<span><span class="co">## Fuel loading (kg/m2) total: 0.1414227  adult trees: 0.1414227  saplings: 0  shrubs: 0  herbs: 0 </span></span>
<span><span class="co">## PAR ground (%): NA  SWR ground (%): NA</span></span></code></pre>
<p>Both density and tree basal area seem unusually low. This is because
we did not specify the sampled area, and tree data in
<code>forest</code> objects require a density estimation. By default,
each record (row in the input data frame) will count as a tree, but we
can add the sampled plot surface to correct density per hectare. In a
15-m radius plot, the sampled surface is 706.86 m2. We add this
information in the data table:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">PlotSurface</span> <span class="op">&lt;-</span> <span class="fl">706.86</span></span></code></pre></div>
<p>and we can repeat the read of forest inventory data after adding a
new element to the mapping vector:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mapping</span>, <span class="st">"plot.size"</span> <span class="op">=</span> <span class="st">"PlotSurface"</span><span class="op">)</span></span>
<span><span class="va">y_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_forests.html">add_forests</a></span><span class="op">(</span><span class="va">y_1</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span></code></pre></div>
<p>If we check the forest again, we will see the change in density and
basal area:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">y_2</span><span class="op">$</span><span class="va">forest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">SpParamsMED</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tree BA (m2/ha): 42.6956049  adult trees: 42.6956049  saplings: 0 </span></span>
<span><span class="co">## Density (ind/ha) adult trees: 3777.2684832  saplings: 0  shrubs (estimated): 0 </span></span>
<span><span class="co">## Cover (%) adult trees: 100  saplings: 0  shrubs: 0  herbs: 0 </span></span>
<span><span class="co">## LAI (m2/m2) total: 4.9189289  adult trees: 4.9189289  saplings: 0  shrubs: 0  herbs: 0 </span></span>
<span><span class="co">## Fuel loading (kg/m2) total: 1.2992685  adult trees: 1.2992685  saplings: 0  shrubs: 0  herbs: 0 </span></span>
<span><span class="co">## PAR ground (%): NA  SWR ground (%): NA</span></span></code></pre>
<p>At this point, we may wonder whether we are finished. Function
<code><a href="../reference/forest_parametrization.html">check_forests()</a></code> can help detecting missing data:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/forest_parametrization.html">check_forests</a></span><span class="op">(</span><span class="va">y_2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> 3 non-null 'forest' elements out of 3 wildland locations (100%).</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> No wildland locations with NULL values in column 'forest'.</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> All objects in column 'forest' have the right class.</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #BBBB00;">!</span> Missing tree height values detected for 3 wildland locations (100%).</span></span></code></pre>
<p>The function alerts us that height values are missing. Since they are
required for simulations using <strong>medfate</strong>, we need to
estimate them. While being overly simplistic, here we use one allometric
equation for all species to estimate tree height in cm from
diameter:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Height.cm</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="fl">1.806</span><span class="op">*</span><span class="va">poblet_trees</span><span class="op">$</span><span class="va">Diameter.cm</span><span class="op">^</span><span class="fl">0.518</span></span></code></pre></div>
<p>Now we modify the mapping to include height and repeat the reading
operation:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mapping</span>, <span class="st">"Height"</span> <span class="op">=</span> <span class="st">"Height.cm"</span><span class="op">)</span></span>
<span><span class="va">y_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_forests.html">add_forests</a></span><span class="op">(</span><span class="va">y_1</span>, tree_table <span class="op">=</span> <span class="va">poblet_trees</span>, tree_mapping <span class="op">=</span> <span class="va">mapping</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span><span class="op">)</span></span></code></pre></div>
<p>If we check the forest data again, we should encounter no more
issues:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/forest_parametrization.html">check_forests</a></span><span class="op">(</span><span class="va">y_2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> 3 non-null 'forest' elements out of 3 wildland locations (100%).</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> No wildland locations with NULL values in column 'forest'.</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> All objects in column 'forest' have the right class.</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> No missing values detected in key tree/shrub attributes of 'forest' objects.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="soil-parameterization">Soil parameterization<a class="anchor" aria-label="anchor" href="#soil-parameterization"></a>
</h2>
<p>Soil information is most usually lacking for the target locations.
Regional maps of soil properties may be available in some cases. Here we
assume this information is not available, so that we resort to global
products. In particular, we will use information provided in <a href="https://soilgrids.org/" class="external-link">SoilGrids</a> at 250 m resolution (<a href="https://doi.org/10.1371/journal.pone.0169748" class="external-link">Hengl et
al. (2017)</a>; <a href="https://doi.org/10.5194/soil-7-217-2021" class="external-link">Poggio
et al. (2021)</a>).</p>
<div class="section level3">
<h3 id="soilgrids-2-0-data">SoilGrids 2.0 data<a class="anchor" aria-label="anchor" href="#soilgrids-2-0-data"></a>
</h3>
<p>Function <code><a href="../reference/soil_parametrization.html">add_soilgrids()</a></code> can perform queries using the
REST API of SoilGrids, but this becomes problematic for multiple sites.
Hence, we recommend downloading SoilGrid rasters for the target region
and storing them in a particular format, so that function
<code><a href="../reference/soil_parametrization.html">add_soilgrids()</a></code> can read them (check the details of the
function documentation). The extraction of SoilGrids data for our target
locations is fast using this approach:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soilgrids_path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataset_path</span>,<span class="st">"Soils/Sources/Global/SoilGrids/Spain/"</span><span class="op">)</span></span>
<span><span class="va">y_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/soil_parametrization.html">add_soilgrids</a></span><span class="op">(</span><span class="va">y_2</span>, soilgrids_path <span class="op">=</span> <span class="va">soilgrids_path</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>And the result has an extra column <code>soil</code>:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_3</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 3 features and 6 fields</span></span>
<span><span class="co">## Geometry type: POINT</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 1.0215 ymin: 41.3432 xmax: 1.0219 ymax: 41.3443</span></span>
<span><span class="co">## Geodetic CRS:  WGS 84</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">##   id                   geometry elevation slope aspect forest       soil        </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;POINT [°]&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> POBL_CTL     (1.0215 41.3432)      853.  30.1   76.0 <span style="color: #949494;">&lt;forest [5]&gt;</span> <span style="color: #949494;">&lt;df [6 × 7]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> POBL_THI_BEF (1.0219 41.3443)      814.  29.3   40.3 <span style="color: #949494;">&lt;forest [5]&gt;</span> <span style="color: #949494;">&lt;df [6 × 7]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> POBL_THI_AFT (1.0219 41.3443)      814.  29.3   40.3 <span style="color: #949494;">&lt;forest [5]&gt;</span> <span style="color: #949494;">&lt;df [6 × 7]&gt;</span></span></span></code></pre>
<p>The elements of the list are the usual data frames of soil properties
in <strong>medfate</strong>:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_3</span><span class="op">$</span><span class="va">soil</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##   widths clay sand   om   bd  rfc nitrogen</span></span>
<span><span class="co">## 1     50 25.3 32.1 7.24 1.05 16.8     5.07</span></span>
<span><span class="co">## 2    100 25.5 32.0 3.10 1.16 18.7     2.18</span></span>
<span><span class="co">## 3    150 29.9 31.2 1.96 1.25 19.8     1.35</span></span>
<span><span class="co">## 4    300 30.7 30.7 1.00 1.39 19.6     0.81</span></span>
<span><span class="co">## 5    400 30.4 30.2 0.89 1.49 20.4     0.58</span></span>
<span><span class="co">## 6   1000 32.0 30.2 0.62 1.50 21.5     0.44</span></span></code></pre>
<p>We can use function <code><a href="../reference/soil_parametrization.html">check_soils()</a></code> to detect whether
there are missing values:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/soil_parametrization.html">check_soils</a></span><span class="op">(</span><span class="va">y_3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> 3 non-null 'soil' elements out of 3 wildland/agriculture locations (100%).</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> No missing values detected in key soil attributes.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="soil-depth-and-rock-content-modification">Soil depth and rock content modification<a class="anchor" aria-label="anchor" href="#soil-depth-and-rock-content-modification"></a>
</h3>
<p>SoilGrids 2.0 does not provide information on soil depth, and rock
fragment content is normally underestimated, which leads to an
overestimation of water holding capacity. Function
<code><a href="../reference/soil_parametrization.html">modify_soils()</a></code> allows modifying soil definitions, if
information is available for soil depth, depth to the (unaltered)
bedrock, or both. Soil depth maps are not common in many regions, so
here we will resort on a global product at 250m-resolution by <a href="https://doi.org/10.1002/2016MS000686" class="external-link">Shangguan et al. (2017)</a>,
which consists on three rasters:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Censored soil depth (cm)</span></span>
<span><span class="va">bdricm</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataset_path</span>, <span class="st">"Soils/Sources/Global/SoilDepth_Shangguan2017/BDRICM_M_250m_ll.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Probability of bedrock within first 2m [0-100]</span></span>
<span><span class="va">bdrlog</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataset_path</span>, <span class="st">"Soils/Sources/Global/SoilDepth_Shangguan2017/BDRLOG_M_250m_ll.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Absolute depth to bedrock (cm)</span></span>
<span><span class="va">bdticm</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataset_path</span>, <span class="st">"Soils/Sources/Global/SoilDepth_Shangguan2017/BDTICM_M_250m_ll.tif"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>In order to accelerate raster manipulations, we crop the global
rasters to the extent of the target area:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_vect</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">bdricm</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x_ext</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="va">x_vect</span><span class="op">)</span></span>
<span><span class="va">bdricm</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">bdricm</span>, <span class="va">x_ext</span>, snap <span class="op">=</span> <span class="st">"out"</span><span class="op">)</span></span>
<span><span class="va">bdrlog</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">bdrlog</span>, <span class="va">x_ext</span>, snap <span class="op">=</span> <span class="st">"out"</span><span class="op">)</span></span>
<span><span class="va">bdticm</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">bdticm</span>, <span class="va">x_ext</span>, snap <span class="op">=</span> <span class="st">"out"</span><span class="op">)</span></span></code></pre></div>
<p>Censored soil depth is a poor product of actual soil depth, but we
have observed a fairly good correlation between soil depth values in
Catalonia and the probability of finding the bedrock within the first
two meters. Hence, we multiply the two layers and use it as a (crude)
estimate of soil depth, expressing it in mm:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soil_depth_mm</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">bdricm</span><span class="op">$</span><span class="va">BDRICM_M_250m_ll</span><span class="op">*</span><span class="fl">10</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="op">(</span><span class="va">bdrlog</span><span class="op">$</span><span class="va">BDRLOG_M_250m_ll</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>and we take the depth to bedrock as appropriate, but change its units
to mm as well:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">depth_to_bedrock_mm</span> <span class="op">&lt;-</span> <span class="va">bdticm</span><span class="op">*</span><span class="fl">10</span></span></code></pre></div>
<p>We can now call function <code><a href="../reference/soil_parametrization.html">modify_soils()</a></code> with the two
rasters to perform the correction of soil characteristics:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/soil_parametrization.html">modify_soils</a></span><span class="op">(</span><span class="va">y_3</span>, </span>
<span>                    soil_depth_map <span class="op">=</span> <span class="va">soil_depth_mm</span>, </span>
<span>                    depth_to_bedrock_map <span class="op">=</span> <span class="va">depth_to_bedrock_mm</span>,</span>
<span>                    progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>In this case, the depth to bedrock values were deeper than 2m, so
that only the soil depth map had an effect on the correction procedure.
After the correction, the rock fragment content of the soil has changed
substantially:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_4</span><span class="op">$</span><span class="va">soil</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##   widths clay sand   om   bd      rfc nitrogen</span></span>
<span><span class="co">## 1     50 25.3 32.1 7.24 1.05 16.80000     5.07</span></span>
<span><span class="co">## 2    100 25.5 32.0 3.10 1.16 18.70000     2.18</span></span>
<span><span class="co">## 3    150 29.9 31.2 1.96 1.25 19.80000     1.35</span></span>
<span><span class="co">## 4    300 30.7 30.7 1.00 1.39 27.76899     0.81</span></span>
<span><span class="co">## 5    400 30.4 30.2 0.89 1.49 49.36709     0.58</span></span>
<span><span class="co">## 6   1000 32.0 30.2 0.62 1.50 92.56329     0.44</span></span></code></pre>
<p>Finally, we can call again <code><a href="../reference/soil_parametrization.html">check_soils()</a></code> to verify that
everything is fine:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/soil_parametrization.html">check_soils</a></span><span class="op">(</span><span class="va">y_4</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> 3 non-null 'soil' elements out of 3 wildland/agriculture locations (100%).</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> No missing values detected in key soil attributes.</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="initialization-test">Initialization test<a class="anchor" aria-label="anchor" href="#initialization-test"></a>
</h2>
<p>We can check whether the input data set is well formed by calling
function <code><a href="../reference/initialize_landscape.html">initialize_landscape()</a></code>:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initialize_landscape.html">initialize_landscape</a></span><span class="op">(</span><span class="va">y_4</span>, <span class="va">SpParamsMED</span>, <span class="fu"><a href="https://emf-creaf.github.io/medfate/reference/defaultControl.html" class="external-link">defaultControl</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                          progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 3 features and 7 fields</span></span>
<span><span class="co">## Geometry type: POINT</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: 1.0215 ymin: 41.3432 xmax: 1.0219 ymax: 41.3443</span></span>
<span><span class="co">## Geodetic CRS:  WGS 84</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 8</span></span></span>
<span><span class="co">##   id                   geometry elevation slope aspect forest       soil        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;POINT [°]&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> POBL_CTL     (1.0215 41.3432)      853.  30.1   76.0 <span style="color: #949494;">&lt;forest [5]&gt;</span> <span style="color: #949494;">&lt;df [6 × 7]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> POBL_THI_BEF (1.0219 41.3443)      814.  29.3   40.3 <span style="color: #949494;">&lt;forest [5]&gt;</span> <span style="color: #949494;">&lt;df [6 × 7]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> POBL_THI_AFT (1.0219 41.3443)      814.  29.3   40.3 <span style="color: #949494;">&lt;forest [5]&gt;</span> <span style="color: #949494;">&lt;df [6 × 7]&gt;</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: state &lt;list&gt;</span></span></span></code></pre>
<p>Everything seems fine for simulations!</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Miquel De Cáceres, Aitor Améztegui, María González, Núria Aquilué, Daniel Caviedes-Voullième, Mario Morales-Hernández.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
